{"version":3,"file":"tv-load-more.js","sources":["../src/tv-load-more.js"],"sourcesContent":["import './css/styles.css'\nimport axios from 'axios'\n\n\n// Створи фільмотеку з популярними фільмами, для цього використай\n// https://developer.themoviedb.org/reference/trending-movies\n\n// Щоб отримати постер фільму потрібно підставити url з відповіді від бекенду та url з документації\n// https://developer.themoviedb.org/docs/image-basics\n\n// Відмалюй картки з фільмами\n// Приклад картки  => https://prnt.sc/Hi_iLLg7Nd1F\n\n// Реалізуй пагінацію\n// 1 Кнопка \"Load More\"\n// 2 Infinity scroll (https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API)\n\nconst BASE_URL = \"https://api.themoviedb.org/3\";\nconst END_POINT = \"/trending/movie/week\";\nconst API_KEY = \"345007f9ab440e5b86cef51be6397df1\";\n\n\nconst container = document.querySelector(\".js-movie-list\");\nconst loadMore = document.querySelector(\".js-load-more\");\n\nlet page = 1;\n\nloadMore.addEventListener(\"click\", handleClick);\n\nasync function serviceMovie(page = 1) {\n    const { data } = await axios(`${BASE_URL}${END_POINT}`, {\n        params: {\n            api_key: API_KEY,\n            page\n        }\n    });\n\n    return data;\n}\n\nserviceMovie(page)\n    .then(data => {\n        console.log(data);\n        container.insertAdjacentHTML(\"beforeend\", createMarkup(data.results));\n\n        if(data.page < data.total_pages) {\n            loadMore.classList.replace(\"load-more-hidden\", \"load-more\");\n        }\n    })\n    .catch(error => {axios\n        alert(error.message)\n    })\n\nfunction createMarkup(arr) {\n    return arr.map(({ poster_path, release_date, vote_average, title }) => `\n        <li class=\"movie-card\">\n            <img src=\"https://image.tmdb.org/t/p/w300${poster_path}\" alt=\"${title}\"/>\n            <div class=\"movie-info\">\n                <h2>${title}</h2>\n                <p>Release Date: ${release_date}</p>\n                <p>Vote Average: ${vote_average}</p>\n            </div>\n        </li>\n    `).join(\"\");\n}\n\nasync function handleClick() {\n    page += 1;\n    loadMore.disabled = true;\n    \n    try {\n        const data = await serviceMovie(page);\n        console.log(data);\n        container.insertAdjacentHTML(\"beforeend\", createMarkup(data.results));\n\n        loadMore.disabled = false;\n\n        if(data.page >= data.total_pages) {\n            loadMore.classList.replace(\"load-more\", \"load-more-hidden\");\n        }\n    } catch(error) {\n        alert(error.message)\n    }\n}\n\n"],"names":["BASE_URL","END_POINT","API_KEY","container","loadMore","page","handleClick","serviceMovie","data","axios","createMarkup","error","arr","poster_path","release_date","vote_average","title"],"mappings":"oFAiBA,MAAMA,EAAW,+BACXC,EAAY,uBACZC,EAAU,mCAGVC,EAAY,SAAS,cAAc,gBAAgB,EACnDC,EAAW,SAAS,cAAc,eAAe,EAEvD,IAAIC,EAAO,EAEXD,EAAS,iBAAiB,QAASE,CAAW,EAE9C,eAAeC,EAAaF,EAAO,EAAG,CAClC,KAAM,CAAE,KAAAG,CAAM,EAAG,MAAMC,EAAM,GAAGT,CAAQ,GAAGC,CAAS,GAAI,CACpD,OAAQ,CACJ,QAASC,EACT,KAAAG,CACH,CACT,CAAK,EAED,OAAOG,CACX,CAEAD,EAAaF,CAAI,EACZ,KAAKG,GAAQ,CACV,QAAQ,IAAIA,CAAI,EAChBL,EAAU,mBAAmB,YAAaO,EAAaF,EAAK,OAAO,CAAC,EAEjEA,EAAK,KAAOA,EAAK,aAChBJ,EAAS,UAAU,QAAQ,mBAAoB,WAAW,CAEtE,CAAK,EACA,MAAMO,GAAS,CACZ,MAAMA,EAAM,OAAO,CAC3B,CAAK,EAEL,SAASD,EAAaE,EAAK,CACvB,OAAOA,EAAI,IAAI,CAAC,CAAE,YAAAC,EAAa,aAAAC,EAAc,aAAAC,EAAc,MAAAC,CAAK,IAAO;AAAA;AAAA,uDAEpBH,CAAW,UAAUG,CAAK;AAAA;AAAA,sBAE3DA,CAAK;AAAA,mCACQF,CAAY;AAAA,mCACZC,CAAY;AAAA;AAAA;AAAA,KAG1C,EAAE,KAAK,EAAE,CACd,CAEA,eAAeT,GAAc,CACzBD,GAAQ,EACRD,EAAS,SAAW,GAEpB,GAAI,CACA,MAAMI,EAAO,MAAMD,EAAaF,CAAI,EACpC,QAAQ,IAAIG,CAAI,EAChBL,EAAU,mBAAmB,YAAaO,EAAaF,EAAK,OAAO,CAAC,EAEpEJ,EAAS,SAAW,GAEjBI,EAAK,MAAQA,EAAK,aACjBJ,EAAS,UAAU,QAAQ,YAAa,kBAAkB,CAEjE,OAAOO,EAAO,CACX,MAAMA,EAAM,OAAO,CACtB,CACL"}